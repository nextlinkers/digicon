<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Choose the Mission</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    .back-btn {
      position: fixed;
      top: 32px;
      left: 32px;
      z-index: 10000;
      background: #181818;
      color: #fff;
      border: 2px solid #c10016;
      border-radius: 10px;
      font-size: 1.1rem;
      font-family: 'Roboto', Arial, sans-serif;
      font-weight: 700;
      padding: 10px 28px;
      cursor: pointer;
      box-shadow: 0 2px 8px #18181844;
      transition: background 0.2s, color 0.2s;
    }
    .back-btn:hover {
      background: #c10016;
      color: #fff;
    }
    /* Attractive input styling */
    input[type="text"] {
      background: #fff;
      color: #181818;
      border: 2px solid #181818;
      border-radius: 10px;
      padding: 12px 18px;
      font-size: 1.08rem;
      font-family: 'Roboto', Arial, sans-serif;
      outline: none;
      transition: border 0.2s, box-shadow 0.2s;
      box-shadow: 0 2px 8px #18181822;
      margin-bottom: 0;
    }
    input[type="text"]:focus {
      border-color: #c10016;
      box-shadow: 0 0 0 2px #c1001633;
    }
    body {
      background: linear-gradient(120deg, #181818 0%, #ededed 60%, #c10016 100%);
      color: #181818;
      font-family: 'Roboto', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
    }
    .container {
      max-width: 1400px;
      margin: 40px auto;
      background: rgba(255,255,255,0.04);
      border: 1px solid #18181844;
      border-radius: 16px;
      box-shadow: 0 2px 16px #18181844;
      padding: 32px 24px;
    }
    h1 {
      text-align: center;
      font-size: 2.5rem;
      letter-spacing: 2px;
      margin-bottom: 24px;
      font-weight: 700;
      text-shadow: none;
      font-family: 'Roboto', Arial, sans-serif;
    }
    .choose-mission-black {
      color: #181818;
    }
    .choose-mission-red {
      color: #c10016;
    }
    .problem-list {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 40px 32px;
      margin: 32px auto 0 auto;
      width: 100%;
      max-width: 1200px;
    }
    @media (max-width: 900px) {
      .problem-list {
        grid-template-columns: 1fr;
        gap: 32px;
        max-width: 98vw;
      }
    }
    .problem-card {
      background: #181818;
      border: 1.5px solid #c10016;
      border-radius: 10px;
      box-shadow: 0 4px 24px #18181899;
      color: #ededed;
      transition: box-shadow 0.2s;
      position: relative;
      margin-bottom: 0;
      width: 100%;
      height: auto;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: flex-start;
      padding: 32px 28px 28px 28px;
      box-sizing: border-box;
      overflow: visible;
    }
    @media (max-width: 900px) {
      .problem-card {
        width: 100%;
        max-width: 100%;
        margin: 0 auto;
        height: auto;
      }
    }
    .problem-card h2 {
      font-size: 1.4rem;
      margin-bottom: 12px;
      color: #c10016;
      text-shadow: none;
      font-family: 'Roboto', Arial, sans-serif;
      font-weight: bold;
    }
    .problem-card p {
      font-size: 1.08rem;
      margin-bottom: 10px;
      color: #ededed;
      white-space: pre-line;
    }
    .problem-card .teams {
      font-size: 1rem;
      margin-bottom: 10px;
      color: #ededed;
    }
    .problem-card .cyber-btn {
      margin-top: 8px;
    }
    .cyber-btn {
      background: #c10016;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      padding: 10px 24px;
      margin-top: 12px;
      cursor: pointer;
      box-shadow: 0 2px 8px #18181844;
      transition: background 0.2s;
    }
    .cyber-btn:hover {
      background: #232323;
      color: #fff;
      border: 1px solid #c10016;
    }
    @media (max-width: 900px) {
      .problem-list {
        grid-template-columns: 1fr;
        max-width: 350px;
      }
    }
    .problem {
      background: #232323;
      border: 2px solid #c10016;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 16px #18181844;
      margin-bottom: 8px;
    }
    .problem.full {
      border-color: #c10016;
      color: #c10016;
      box-shadow: 0 0 16px #c10016;
    }
    .teams {
      margin-top: 10px;
      font-size: 0.95rem;
    }
    form {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      margin-bottom: 32px;
      align-items: center;
      justify-content: center;
    }
    h1 {
      text-align: center;
      font-size: 2.5rem;
      letter-spacing: 2px;
      margin-bottom: 24px;
      color: #c10016;
      font-weight: 700;
      text-shadow: none;
      font-family: 'Roboto', Arial, sans-serif;
      outline: none;
    }
    .error {
      color: #c10016;
      text-shadow: none;
    }
    .cyber-modal {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(24,24,24,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.2s;
    }
    .cyber-modal.active {
      visibility: visible;
      opacity: 1;
    }
    .cyber-modal-content {
      background: #fff;
      border: 2px solid #c10016;
      border-radius: 18px;
      box-shadow: 0 8px 40px #18181888;
      padding: 36px 44px 28px 44px;
      color: #181818;
      text-align: left;
      min-width: 340px;
      max-width: 95vw;
      min-height: 180px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      font-family: 'Roboto', Arial, sans-serif;
    }
    .cyber-modal-content h3 {
      margin: 0 0 18px 0;
      font-size: 1.4rem;
      color: #c10016;
      font-weight: 700;
      letter-spacing: 1px;
    }
    .cyber-modal-content .modal-row {
      margin-bottom: 10px;
      font-size: 1.08rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .cyber-modal-content .modal-label {
      font-weight: 700;
      color: #181818;
      min-width: 120px;
    }
    .cyber-modal-content .modal-value {
      color: #c10016;
      font-weight: 500;
    }
    .cyber-modal-content .modal-problem-title {
      font-weight: 700;
      color: #c10016;
      font-size: 1.1rem;
      margin-bottom: 2px;
    }
    .cyber-modal-content .modal-problem-desc {
      color: #181818;
      font-size: 1rem;
      margin-bottom: 10px;
    }
    .cyber-modal-btns {
      margin-top: 18px;
      display: flex;
      gap: 18px;
      justify-content: flex-end;
      width: 100%;
    }
    .cyber-modal-btn {
      background: #c10016;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 1.08rem;
      padding: 8px 28px;
      cursor: pointer;
      box-shadow: 0 0 8px #18181844;
      transition: background 0.2s;
    }
    .cyber-modal-btn:hover {
      background: #181818;
      color: #fff;
      border: 2px solid #c10016;
    }
  </style>
</head>
<body>
  <button class="back-btn" onclick="window.location.href='home.html'">&#8592; Back</button>
  <div class="container">
    <div style="text-align:right; font-size:0.95rem; opacity:0.8; margin-bottom:8px;" id="clientIp">IP: detecting...</div>
    <h1 style="letter-spacing:2px; font-size:3.5rem; background: linear-gradient(90deg, #c10016 0%, #181818 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; color: transparent;">
      Choose the Mission
    </h1>
    <div id="message" class="message"></div>
    <form id="registerForm">
      <input type="text" id="teamNumber" placeholder="Team Number" required />
      <input type="text" id="teamName" placeholder="Team Name" required />
      <input type="text" id="teamLeader" placeholder="Team Leader" required />
      <input type="hidden" id="selectedProblemId" />
    </form>
    <div class="problem-list" id="problemList"></div>
  </div>

  <!-- Modal moved outside container for proper overlay -->
  <div class="cyber-modal" id="cyberModal">
    <div class="cyber-modal-content">
      <div id="cyberModalMsg"></div>
      <div class="cyber-modal-btns">
        <button class="cyber-modal-btn" id="cyberModalCancel">Cancel</button>
        <button class="cyber-modal-btn" id="cyberModalOk">OK</button>
      </div>
    </div>
  </div>

  <script>
    (async function showIp(){
      try {
        const res = await fetch('/api/ip');
        const data = await res.json();
        document.getElementById('clientIp').textContent = 'IP: ' + (data.ip || 'unknown');
      } catch (e) {
        const el = document.getElementById('clientIp');
        if (el) el.textContent = 'IP: unavailable';
      }
    })();
    async function fetchProblems() {
      const res = await fetch('/api/problem-statements');
      return await res.json();
    }
    function showCyberModal(details, onOk, onCancel) {
      const modal = document.getElementById('cyberModal');
      const msgDiv = document.getElementById('cyberModalMsg');
      msgDiv.innerHTML = details;
      modal.classList.add('active');
      function cleanup() {
        modal.classList.remove('active');
        document.getElementById('cyberModalOk').onclick = null;
        document.getElementById('cyberModalCancel').onclick = null;
      }
      document.getElementById('cyberModalOk').onclick = () => {
        cleanup();
        if (onOk) onOk();
      };
      document.getElementById('cyberModalCancel').onclick = () => {
        cleanup();
        if (onCancel) onCancel();
      };
    }

    function renderProblems(problems) {
      const list = document.getElementById('problemList');
      list.innerHTML = '';
      problems.forEach(ps => {
        const card = document.createElement('div');
        card.className = 'problem-card' + (ps.isAvailable ? '' : ' full');
        card.innerHTML = `
          <h2>${ps.title}</h2>
          <p>${ps.description}</p>
          <div class="teams">${ps.selectedCount}/${ps.maxSelections} teams</div>
          <button class="cyber-btn" ${ps.isAvailable ? '' : 'disabled'} data-id="${ps.id}">Select</button>
        `;
        list.appendChild(card);
      });
      // Add select button listeners
      list.querySelectorAll('.cyber-btn[data-id]').forEach(btn => {
        btn.onclick = function() {
          const psId = btn.getAttribute('data-id');
          const psTitle = btn.parentElement.querySelector('h2').textContent;
          const psDesc = btn.parentElement.querySelector('p').textContent;
          // Get team details from form
          const teamNumber = document.getElementById('teamNumber').value.trim();
          const teamName = document.getElementById('teamName').value.trim();
          const teamLeader = document.getElementById('teamLeader').value.trim();
          let details = `<h3>Confirm Registration</h3>`;
          details += `<div class='modal-row'><span class='modal-label'>Team Number:</span> <span class='modal-value'>${teamNumber || 'Not entered'}</span></div>`;
          details += `<div class='modal-row'><span class='modal-label'>Team Name:</span> <span class='modal-value'>${teamName || 'Not entered'}</span></div>`;
          details += `<div class='modal-row'><span class='modal-label'>Team Leader:</span> <span class='modal-value'>${teamLeader || 'Not entered'}</span></div>`;
          details += `<hr style='margin:12px 0 10px 0; border: none; border-top: 1.5px solid #c10016; width: 100%;'>`;
          details += `<div class='modal-problem-title'>Problem Statement: ${psTitle}</div>`;
          details += `<div class='modal-problem-desc'>${psDesc}</div>`;
          showCyberModal(details, () => {
            document.getElementById('selectedProblemId').value = psId;
            // Only submit if all fields are filled
            if (teamNumber && teamName && teamLeader && psId) {
              document.getElementById('registerForm').requestSubmit();
            } else {
              document.getElementById('registerForm').scrollIntoView({ behavior: 'smooth' });
            }
          });
        };
      });
    }
    // Removed dropdown rendering
    function showMessage(msg, error) {
      const el = document.getElementById('message');
      el.textContent = msg;
      el.className = error ? 'message error' : 'message';
      setTimeout(() => { el.textContent = ''; }, 3000);
    }
    document.getElementById('registerForm').onsubmit = async e => {
      e.preventDefault();
      const teamNumber = document.getElementById('teamNumber').value.trim();
      const teamName = document.getElementById('teamName').value.trim();
      const teamLeader = document.getElementById('teamLeader').value.trim();
      const problemStatementId = document.getElementById('selectedProblemId').value;
      if (!teamNumber || !teamName || !teamLeader || !problemStatementId) {
        showMessage('Please fill all fields and select a problem statement.', true);
        return;
      }
      // No browser confirm, registration is confirmed via modal
      const res = await fetch('/api/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ teamNumber, teamName, teamLeader, problemStatementId })
      });
      const data = await res.json();
      if (res.ok) {
        showMessage('Registration successful!', false);
        load();
        document.getElementById('registerForm').reset();
        document.getElementById('selectedProblemId').value = '';
      } else {
        showMessage(data.error || 'Registration failed.', true);
      }
    };
    async function load() {
      const problems = await fetchProblems();
      renderProblems(problems);
    }
    load();
  </script>
<script>
// Mock API for static hosting
const mockProblems = [
  {
    "id": "ps001",
    "title": "Defending AI Against Prompt Injection",
    "description": "Background: Generative AI is widely used, but prompt injection attacks can trick models into revealing confidential data or bypassing restrictions.\nChallenge: Build a real-time prompt injection detection & defense system that filters harmful prompts without blocking normal user input.\nExpected Outcome: A middleware/API wrapper for LLMs that flags or blocks malicious prompts in <200ms.\nDatasets:\nAdvBench – adversarial prompt dataset (https://huggingface.co/datasets/walledai/AdvBench)\nJailbreakBench – misuse/jailbreak behaviors (https://jailbreakbench.github.io/)\nSafety Prompts Data Catalogue (https://safetyprompts.com/)",
    "maxSelections": 3,
    "selectedCount": 0,
    "isAvailable": true
  },
  {
    "id": "ps002",
    "title": "Zero-Day Attack Prediction in IoT Networks",
    "description": "Background: IoT devices often remain unpatched and are exploited via zero-day vulnerabilities. Most IDS systems detect only after compromise.\nChallenge: Design an anomaly-based IDS that predicts zero-day exploitation attempts using real-time IoT telemetry.\nExpected Outcome: Lightweight IDS prototype deployable on IoT/edge devices.\nDatasets:\nTON_IoT Dataset – https://research.unsw.edu.au/projects/toniot-datasets\nTON_IoT Kaggle Subset – https://www.kaggle.com/datasets/programmer3/ton-iot-network-intrusion-dataset\nBoT-IoT Dataset – https://research.unsw.edu.au/projects/bot-iot-dataset",
    "maxSelections": 3,
    "selectedCount": 0,
    "isAvailable": true
  },
  {
    "id": "ps003",
    "title": "Deepfake Shield for Real-Time Identity Verification",
    "description": "Background: Deepfakes are used in fraudulent banking calls, KYC bypass, and misinformation campaigns. Current detection is mostly offline.\nChallenge: Build a real-time multimodal deepfake detector (voice + video + behavior analysis).\nExpected Outcome: Verification layer for live video calls or financial KYC workflows.\nDatasets:\nFace Forensics++ – https://github.com/ondyari/FaceForensics\nASVspoof 2019 – https://www.asvspoof.org/\nDeep Fake Detection Challenge (DFDC) – https://ai.meta.com/datasets/dfdc/",
    "maxSelections": 3,
    "selectedCount": 0,
    "isAvailable": true
  },
  {
    "id": "ps004",
    "title": "Explainable AI Compliance Auditor",
    "description": "Background: AI regulations (GDPR, HIPAA, RBI) demand explainable decisions in finance, healthcare, and hiring.\nChallenge: Develop a real-time AI explainability & bias auditor that generates human-readable justifications.\nExpected Outcome: A dashboard overlay for AI systems that shows decision explanations, bias checks, and regulatory reports.\nDatasets:\nFICO Credit Risk Dataset – https://community.fico.com/s/explainable-machine-learning-challenge\nMIMIC-III Healthcare Dataset – https://physionet.org/content/mimiciii/1.4/\nCOMPAS Recidivism Dataset – https://github.com/propublica/compas-analysis",
    "maxSelections": 3,
    "selectedCount": 0,
    "isAvailable": true
  },
  {
    "id": "ps005",
    "title": "Intelligent Phishing Detection with NLP",
    "description": "Build an AI-powered phishing detection system that leverages NLP to analyze the content of emails, websites, and messages in addition to URL-based analysis. The system should detect sophisticated phishing attempts by understanding language patterns, sentiment manipulation, and keyword obfuscation.\nObjective:\nEnhance phishing detection beyond blacklists by using machine learning and semantic analysis.\nInput:\nURL list, email samples, webpage content, text messages.\nOutput:\nClassification (Phishing / Legitimate), confidence score, explanation of suspicious language patterns.\nBonus:\nTrain using public datasets (Phishing Corpus, Enron Email Dataset, etc.).",
    "maxSelections": 5,
    "selectedCount": 0,
    "isAvailable": true
  },
  {
    "id": "ps006",
    "title": "ML-based Encrypted Traffic Anomaly Detection",
    "description": "Build a solution that applies unsupervised machine learning (e.g., clustering, autoencoders) to detect anomalies in encrypted network traffic metadata (packet sizes, timing, frequency) without decrypting the payload, helping to spot malicious behaviors like data exfiltration or command-and-control (C2) communication.\nObjective:\nApply AI/ML to detect threats in encrypted environments where traditional signature-based detection fails.\nInput:\nEncrypted network traffic (PCAP files), connection metadata.\nOutput:\nAnomaly score, flagged suspicious sessions, visualization of traffic patterns.\nBonus:\nSelf-learning model that improves detection accuracy over time.",
    "maxSelections": 5,
    "selectedCount": 0,
    "isAvailable": true
  },
  {
    "id": "ps007",
    "title": "Phishing URL Classifier using Public Datasets",
    "description": "Build a simple AI/ML model that classifies URLs as Phishing or Legitimate using publicly available datasets (e.g., Phishing Websites Dataset from Kaggle).\nObjective:\nHelp beginners create a basic phishing URL detector with clear explanations.\nInput:\nDataset of URLs labelled as phishing or legitimate.\nOutput:\nSimple web page or command-line tool where the user enters a URL and receives a prediction with confidence score and reason (e.g., suspicious keywords, URL length)",
    "maxSelections": 5,
    "selectedCount": 0,
    "isAvailable": true
  },
  {
    "id": "ps008",
    "title": "Digital Forensics – Hidden File Finder",
    "description": "Create a tool that scans a given directory or disk image for hidden files, deleted files, or steganography images using basic forensic techniques (e.g., file signature analysis, carving).\nObjective:\nHelp beginners practice digital forensics skills.\nInput:\nDisk image (.img) or folder with files (some intentionally hidden).\nOutput:\nList of recovered hidden/deleted files and extracted hidden images.",
    "maxSelections": 5,
    "selectedCount": 0,
    "isAvailable": true
  },
  {
    "id": "ps009",
    "title": "HR / Employee Management Module",
    "description": "• Face recognition-based attendance: employees’ faces are recognized in a specific location to mark presence automatically.\n• Track number of days present, total working hours per day/week/month.\n• Leave application & approval workflow.\n• Pay slip downloads.\n• Announcements, document request system, calendar of events/holidays, recent activity logs.",
    "maxSelections": 5,
    "selectedCount": 0,
    "isAvailable": true
  },
  {
    "id": "ps010",
    "title": "Digital Marketing / Agency Module",
    "description": "• A public facing website for the business/agency, showcasing services (e.g. SaaS, web design, graphic design, marketing).\n• Built with only HTML, CSS, JavaScript, PHP (no external JS/CSS animation libraries).\n• Animations hand-coded.\n• Ability for business clients to upload their brand logo + type of business, and in response the system generates a basic website template or poster suited to them.\n• Contact form that can send messages to their WhatsApp.\n• Admin dashboard to collect user leads/data, track which pages/services are viewed, track traffic.\n• Portfolio page that is clean, well laid out, responsive design.",
    "maxSelections": 5,
    "selectedCount": 0,
    "isAvailable": true
  },
  {
    "id": "ps011",
    "title": "Learning Support / AI Twin Bot Module",
    "description": "• A “twin bot” AI assistant students can consult when their mentor is unavailable.\n• Students ask questions; bot answers coherently and can generate additional explanations or examples.\n• Option to generate a PDF document that summarizes answers / explanations for deeper understanding.\n• Tracks the topics the student has covered to help tailor responses.",
    "maxSelections": 5,
    "selectedCount": 0,
    "isAvailable": true
  },
  {
    "id": "ps012",
    "title": "Retail & Billing / Inventory Module (EC-BMS)",
    "description": "• Product inventory management: listing products, tracking stock quantities, adjusting stock after each sale.\n• Billing / invoice generation when products sold; apply codes, taxes, discounts.\n• Track product sales over time; generate reports (daily, weekly, monthly).\n• Predictive insights / suggestions to increase sales: slow-moving products, bundling, special offers.\n• System to send special offers/promotions to customers.",
    "maxSelections": 5,
    "selectedCount": 0,
    "isAvailable": true
  }
];

// Mock API functions
window.mockAPI = {
  async getProblems() {
    return mockProblems;
  },
  
  async register(data) {
    console.log('Mock registration:', data);
    return { message: 'Registration successful! (Mock)' };
  },
  
  async getIP() {
    return { ip: '127.0.0.1' };
  }
};

// Override fetch for API calls
const originalFetch = window.fetch;
window.fetch = async (url, options) => {
  if (url.includes('/api/problem-statements')) {
    return {
      ok: true,
      json: () => Promise.resolve(mockProblems)
    };
  }
  
  if (url.includes('/api/register')) {
    const data = JSON.parse(options.body);
    console.log('Mock registration:', data);
    return {
      ok: true,
      json: () => Promise.resolve({ message: 'Registration successful! (Mock)' })
    };
  }
  
  if (url.includes('/api/ip')) {
    return {
      ok: true,
      json: () => Promise.resolve({ ip: '127.0.0.1' })
    };
  }
  
  return originalFetch(url, options);
};
</script></body>
</html>
